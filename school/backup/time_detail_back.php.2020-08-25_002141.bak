<?php
//session start 
@ob_start();
if (session_status() == PHP_SESSION_NONE) {
    session_start();
}

//connection to database
include('user_connection.php');

//insert institute time detail function
if(isset($_POST['insert_institute_time_detail']))
{   
	 /* create user institute_time_detail table  */
  $sql_query2="CREATE TABLE IF NOT EXISTS institute_time_detail
   ( /* Column name       Column data type */
		srno           	 				 	int, 
		col_institute_start_hour         	int,
		col_institute_start_minute       	int,
		col_institute_start_amorpm       	text,
		col_institute_end_hour        	 	int,
		col_institute_end_minute       	 	int,
		col_institute_end_amorpm       		text,
		col_recess_count       			 	int,
		col_first_recess_start_hour         int,
		col_first_recess_start_minute       int,
		col_first_recess_start_amorpm       text,
		col_first_recess_end_hour        	int,
		col_first_recess_end_minute       	int,
		col_first_recess_end_amorpm       	text,		
		col_second_recess_start_hour        int,
		col_second_recess_start_minute      int,
		col_second_recess_start_amorpm      text,
		col_second_recess_end_hour        	int,
		col_second_recess_end_minute       	int,
		col_second_recess_end_amorpm       	text,		
		col_daily_lecture_count       		text,
		col_holiday			        		text,				
		col_closed_day			       		text,	
		col_halfday       			       	text,		
		col_opened_day				  		text,	
        col_halfday_lecture_count       	text,
		PRIMARY KEY (`srno`)
	);";
  $conn->query($sql_query2);/* execution of query */
  
  //storing data
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_minute=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_amorpm=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_end_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_end_minute=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_end_amorpm=htmlspecialchars($_post['institute_start_hour'])
  $post_recess_count=htmlspecialchars($_post['institute_start_hour'])
  $post_first_recess_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $first_recess_start_minute=htmlspecialchars($_post['institute_start_hour'])
  $first_recess_start_amorpm=htmlspecialchars($_post['institute_start_hour'])
  $first_recess_end_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  $post_institute_start_hour=htmlspecialchars($_post['institute_start_hour'])
  
  /* inserting data in user institute_time_detail table */
  $sql_statement1=$conn->prepare("
  INSERT INTO institute_time_detail
 (
	srno,
	col_institute_start_hour,
	col_institute_start_minute,
	col_institute_start_amorpm,
	col_institute_end_hour,
	col_institute_end_minute,
	col_institute_end_amorpm,
	col_recess_count,
	col_first_recess_start_hour,
	col_first_recess_start_minute,
	col_first_recess_start_amorpm,
	col_first_recess_end_hour,
	col_first_recess_end_minute,
	col_first_recess_end_amorpm,
	col_second_recess_start_hour,
	col_second_recess_start_minute,
	col_second_recess_start_amorpm,
	col_second_recess_end_hour,
	col_second_recess_end_minute,
	col_second_recess_end_amorpm,
	col_daily_lecture_count,
	col_holiday,
	col_closed_day,
	col_halfday,
	col_opened_day,
	col_halfday_lecture_count
 )VALUES(1,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
  
  $sql_statement1->bind_param("i,i,s,i,i,s,i,i,i,s,i,i,s,i,i,s,i,i,s,s,s,s,s,s,s",
	$post_institute_start_hour,
	$post_institute_start_minute,
	$post_institute_start_amorpm,
	$post_institute_end_hour,
	$post_institute_end_minute,
	$post_institute_end_amorpm,
	$post_recess_count,
	$post_first_recess_start_hour,
	$post_first_recess_start_minute,
	$post_first_recess_start_amorpm,
	$post_first_recess_end_hour,
	$post_first_recess_end_minute,
	$post_first_recess_end_amorpm,
	$post_second_recess_start_hour,
	$post_second_recess_start_minute,
	$post_second_recess_start_amorpm,
	$post_second_recess_end_hour,
	$post_second_recess_end_minute,
	$post_second_recess_end_amorpm,
	$post_daily_lecture_count,
	$post_holiday,
	$post_closed_day,
	$post_halfday,
	$post_opened_day,
	$post_halfday_lecture_count
  );
  $sql_statement1->execute();/* execution of query */
  
}

//insert teacher time detail function
if(isset($_POST['insert_teacher_time_detail']))
{
$teacher_table_name=$_POST['teacher_name'];

/* create user teacher_time_detail table  */
  $sql_query1="CREATE TABLE IF NOT EXISTS ".$teacher_table_name."_time_detail
   ( /* Column name       Column data type */
		srno           	 				 	int,
		col_institute_start_hour         	int,
		col_institute_start_minute       	int,
		col_institute_start_amorpm       	text,
		col_institute_end_hour        	 	int,
		col_institute_end_minute       	 	int,
		col_institute_end_amorpm       		text,
		col_recess_count       			 	int,
		col_first_recess_start_hour         int,
		col_first_recess_start_minute       int,
		col_first_recess_start_amorpm       text,
		col_first_recess_end_hour        	int,
		col_first_recess_end_minute       	int,
		col_first_recess_end_amorpm       	text,		
		col_second_recess_start_hour        int,
		col_second_recess_start_minute      int,
		col_second_recess_start_amorpm      text,
		col_second_recess_end_hour        	int,
		col_second_recess_end_minute       	int,
		col_second_recess_end_amorpm       	text,
        col_daily_lecture_count       		text,
		col_holiday			        		text,				
		col_closed_day			       		text,			
		col_halfday       			       	text,
		col_opened_day				  		text,
        col_halfday_lecture_count       	text,
		PRIMARY KEY (`srno`)
	);";
  $conn->query($sql_query1);/* execution of query */
}

//insert class time detail function
if(isset($_POST['insert_class_time_detail']))
{
    $class_table_name=$_POST['class_name'];

  /* create user class_time_detail table  */
  $sql_query2="CREATE TABLE IF NOT EXISTS ".$class_table_name."_time_detail
   ( /* Column name       Column data type */
		srno           	 				 	int,
		col_institute_start_hour         	int,
		col_institute_start_minute       	int,
		col_institute_start_amorpm       	text,
		col_institute_end_hour        	 	int,
		col_institute_end_minute       	 	int,
		col_institute_end_amorpm       		text,
		col_recess_count       			 	int,
		col_first_recess_start_hour         int,
		col_first_recess_start_minute       int,
		col_first_recess_start_amorpm       text,
		col_first_recess_end_hour        	int,
		col_first_recess_end_minute       	int,
		col_first_recess_end_amorpm       	text,		
		col_second_recess_start_hour        int,
		col_second_recess_start_minute      int,
		col_second_recess_start_amorpm      text,
		col_second_recess_end_hour        	int,
		col_second_recess_end_minute       	int,
		col_second_recess_end_amorpm       	text,
		col_student_count                	int,
		col_batch_count                  	int,
        col_daily_lecture_count       		text,
		col_holiday			        		text,				
		col_closed_day			       		text,				
		col_halfday       			       	text,
		col_opened_day				  		text,
        col_halfday_lecture_count       	text,
		PRIMARY KEY (`srno`)
	);";
  $conn->query($sql_query2);/* execution of query */
  
  
}  

//update institute time detail function
if(isset($_POST['update_institute_time_detail']))
{
	$query7="UPDATE adminusers SET firstname='$firstnames',lastname='$lastnames',username='$adminids',password='$passwords' WHERE username='$user_check'";
	$result7 = $conn->query($query7);
}  

//update teacher detail function
if(isset($_POST['update_teacher_time_detail']))
{
}  

//update class time detail function
if(isset($_POST['update_class_time_detail']))
{
}  
?>
